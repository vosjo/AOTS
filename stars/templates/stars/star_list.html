{% extends "base.html" %}
{% load static %}
{% load conversion_tags %}

{% block head %}
{% include "datatables.html" %}

{% endblock %}

{% block headertitle %} Systems: Index ({{project.name}}) {% endblock %}


{% block content %}

<i display="none" id="project-pk" project={{project.pk}}></i>

<i class="material-icons button filter" id="filter-dashboard-button">filter_list</i>

<div id="filter-dashboard">

   <form method="get" action="/stars/" class="table-filter" id="filter-form">
   <h3 class="center"> Filter Systems </h3>
   
   <div class="table-filter-item">
      <p class="filter-label" title="Uses simbad name solver">Name:</p>
      <input class="filter-input" id="filter_name" type="text" placeholder="identifier">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label" title="00:00:00 +00:00:00 or 000.000 +00.000">Co:</p>
      <input class="filter-input" id="filter_co" type="text" placeholder="coodinate search">
   </div>
   
   <hr>
   
   <div class="table-filter-item">
      <p class="filter-label">RA:</p>
      <input class="filter-input" id="filter_ra" type="text" placeholder="min:max">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label">Dec:</p>
      <input class="filter-input" id="filter_dec" type="text" placeholder="min:max">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label">G-mag:</p>
      <input class="filter-input" id="filter_mag" type="text" placeholder="min:max">
   </div>
   
   <hr>
   
   <div class="table-filter-item">
      <p class="filter-label">#phot:</p>
      <input class="filter-input" id="filter_nphot" type="text" placeholder="min:max">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label">#spec:</p>
      <input class="filter-input" id="filter_nspec" type="text" placeholder="min:max">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label">#lc:</p>
      <input class="filter-input" id="filter_nlc" type="text" placeholder="min:max">
   </div>
   
   <hr>
   
   <div class="table-filter-item">
      <p class="filter-label">Class:</p>
      <input class="filter-input" id="filter_class" type="text" placeholder="class">
   </div>
   
   <div class="table-filter-item">
      <p class="filter-label">Type: </p>
      <ul id="classification_options">
         <li><label for="id_classtype_0"><input id="id_classtype_0" name="status" type="checkbox" value="PH" /> Photometric</label></li>
         <li><label for="id_classtype_1"><input id="id_classtype_1" name="status" type="checkbox" value="SP" /> Spectroscopic</label></li>
      </ul>
   </div>
   
   <hr>
   
   <div class="table-filter-item">
      <p class="filter-label">Status: </p>
      <ul id="status_options">
         <li><label for="id_status_0"><input id="id_status_0" name="status" type="radio" value="FI" /> Finished</label></li>
         <li><label for="id_status_1"><input id="id_status_1" name="status" type="radio" value="ON" /> Ongoing</label></li>
         <li><label for="id_status_2"><input id="id_status_2" name="status" type="radio" value="RE" /> Rejected</label></li>
         <li><label for="id_status_3"><input id="id_status_3" name="status" type="radio" value="NE" /> New</label></li>
      </ul>
   </div>
   
   <hr>
   
   <div class="table-filter-item">
      <p class="filter-label">Tags:</p>
      <ul id="tag_filter_options">
      </ul>
   </div>
   
   <input type="submit" class="button filter" id="submit-search" value="Apply">
   </form>
   
</div>

<section>

<table id="datatable" class="fullwidth">
<thead>
   <tr>
   <th><i id="select-all" class="material-icons button select" title="Select/Deselect All">check_box_outline_blank</i></th>
   <th>Name</th>
   <th>RA</th>
   <th>Dec</th>
   <th>Class</th>
   <th>G-mag</th>
   <th title="# Photometry / Spectra / Light curves">Nobs</th>
   <th>Datasets</th>
   <th>Tags</th>
   <th>Status</th>
   </tr>
</thead>
<tfoot>
   <tr>
   <th></th>
   <th>Name</th>
   <th>RA</th>
   <th>Dec</th>
   <th>Class</th>
   <th>G-mag</th>
   <th>Nobs</th>
   <th>Datasets</th>
   <th>Tags</th>
   <th>Status</th>
   </tr>
</tfoot>
</table>

</section>

<div id="editStatus" class="ui-dialog">
   <div id='status-error' class='error-message'></div>
   <ul id="statusOptions">
      <li><input type="radio" name="new-status" value="FI"> Finished   </li>
      <li><input type="radio" name="new-status" value="ON"> Ongoing    </li>
      <li><input type="radio" name="new-status" value="RE"> Rejected   </li>
      <li><input type="radio" name="new-status" value="NE"> New        </li>
   </ul>
</div>

<div id="editTags">
   <div id='tag-error' class='error-message'></div>
   <ul id="tagOptions">
   </ul>
</div>

<div id="addSystems">
    <div id='bulk-add' class='bulk-system-upload'>
    <fieldset>
    <legend>Add Multiple Systems via .csv File</legend>
    <div class="ui-controlgroup-horizontal">
    <form action="{% url "systems:star_list" project.slug %}" method="post" enctype="multipart/form-data" class="upload" id="system-upload-form">
      <h3> Add new Systems </h3>
      {% if user.is_authenticated %}
      {% csrf_token %}
      {% if upload_form.non_field_errors %}
      <p>{{ upload_form.non_field_errors }}</p>
      {% endif %}

      <p>
      {{ upload_form.system.errors }}
      {{ upload_form.system }}
      </p>

      <input id="system-add-upload-button" type="submit" class="material-icons button" value="file_upload"/>
      {% else %}
      <p> Log in to upload files! </p>
      {% endif %}
    </form>
    </div>
    </fieldset>
    </div>
   <div id='single-add' class='single-system-form'>
   <fieldset>
    <legend>Add Single System by Form</legend>
    <div class="ui-controlgroup-horizontal">

    <fieldset>
      <legend>Tags</legend>
      <ul id="add-option-tags">
      </ul>
    </fieldset>
    <fieldset>
    <legend>Name and values*</legend>
          <div class="cg-block">
          <label for="add-system-main-id">Name (main id)</label>
          <input id="add-system-main-id" class="ui-spinner-input">
          <label for="add-system-source-id">Source ID</label>
          <input id="add-system-source-id" class="ui-spinner-input">
          <br>
          <label for="add-system-re-id">Right ascension</label>
          <input id="add-system-re-id" class="ui-spinner-input">
          <label for="add-system-dec-id">Declination</label>
          <input id="add-system-dec-id" class="ui-spinner-input">
              <br>
          <label for="add-system-jname-id">J-Name</label>
          <input id="add-system-jname-id" class="ui-spinner-input">
          <label for="add-system-sptype-id">Spectral Type</label>
          <input id="add-system-sptype-id" class="ui-spinner-input">
              <br>
          <label for="add-system-plx-id">Parallax</label>
          <input id="add-system-plx-id" class="ui-spinner-input">
          <label for="add-system-plx_err-id">Parallax Error</label>
          <input id="add-system-plx_err-id" class="ui-spinner-input">
              <br>
          <label for="add-system-type-id">Type</label>
          <select id="add-system-type-id">
              <option value="Star">Star</option>
              <option value="PM*">PM*</option>
              <option value="V*">V*</option>
              <option value="RGB*">RGB*</option>
          </select>
          </div>
    </fieldset>
          <fieldset><legend>Proper Motion</legend>
          <div class="cg-block">
              <label for="add-system-pmre-id">Proper Motion Right ascension</label>
              <input id="add-system-pmre-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-pmre_err-id">Proper Motion Right ascension Error</label>
              <input id="add-system-pmre_err-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-pmdec-id">Proper Motion Declination</label>
              <input id="add-system-pmdec-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-pmdec_err-id">Proper Motion Declination Error</label>
              <input id="add-system-pmdec_err-id" class="ui-spinner-input">
          </div>
          </fieldset>
          <fieldset><legend>Photometry</legend>
          <div class="cg-block">
              <label for="add-system-gmean-id">G-band mean magnitude </label>
              <input id="add-system-gmean-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-bpmag-id">Integrated BP mean magnitude </label>
              <input id="add-system-bpmag-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-rpmag-id">Integrated RP mean magnitude </label>
              <input id="add-system-rpmag-id" class="ui-spinner-input">
          </div>
          </fieldset>
          <fieldset><legend>JHK and WISE</legend>
          <div class="cg-block">
              <label for="add-system-jmag-id">Jmag </label>
              <input id="add-system-jmag-id" class="ui-spinner-input">
              <label for="add-system-hmag-id">Hmag </label>
              <input id="add-system-hmag-id" class="ui-spinner-input">
              <label for="add-system-kmag-id">Kmag </label>
              <input id="add-system-kmag-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-w1-id">W1 </label>
              <input id="add-system-w1-id" class="ui-spinner-input">
              <label for="add-system-w2-id">W2 </label>
              <input id="add-system-w2-id" class="ui-spinner-input">
                  <br>
              <label for="add-system-w3-id">W3 </label>
              <input id="add-system-w3-id" class="ui-spinner-input">
              <label for="add-system-w4-id">W4 </label>
              <input id="add-system-w4-id" class="ui-spinner-input">
          </div>
          </fieldset>
      </div>
    <p class="add-system-footnote">Blocks marked with a '*' are required</p>
    </fieldset>
   </div>
   <div id='bulk-add' class='bulk-system-form'></div>
</div>

<script type="text/javascript" src="{% static 'js/stars_list.js' %}"></script>

{% endblock %}
